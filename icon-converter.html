<!DOCTYPE html>
<html>
<head>
  <title>GritDocs Icon Converter</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 900px;
      margin: 50px auto;
      padding: 20px;
      background: #f5f5f5;
    }
    .container {
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    h1 { color: #333; }
    .preview {
      display: flex;
      gap: 30px;
      margin: 30px 0;
      flex-wrap: wrap;
      justify-content: space-around;
    }
    .icon-box {
      text-align: center;
    }
    .icon-box h3 {
      margin-top: 0;
      color: #666;
    }
    canvas {
      border: 2px solid #ddd;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      background: white;
    }
    button {
      background: #48CFCB;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      font-weight: bold;
      margin-top: 10px;
    }
    button:hover {
      background: #3ab5b1;
    }
    .instructions {
      background: #f0f9ff;
      padding: 20px;
      border-radius: 6px;
      margin-top: 30px;
      border-left: 4px solid #48CFCB;
    }
    .instructions ol {
      margin: 10px 0;
      padding-left: 20px;
    }
    code {
      background: #f0f0f0;
      padding: 2px 6px;
      border-radius: 3px;
      font-family: monospace;
    }
    .status {
      padding: 15px;
      margin: 20px 0;
      border-radius: 6px;
      font-weight: bold;
    }
    .status.loading {
      background: #ffffcc;
      color: #cc8800;
    }
    .status.ready {
      background: #ccffcc;
      color: #008800;
    }
    .status.error {
      background: #ffcccc;
      color: #880000;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üé® GritDocs Logo ‚Üí PWA Icons Converter</h1>
    <p>Converting your custom logo to PNG icons for PWA...</p>

    <div id="status" class="status loading">‚è≥ Loading your logo...</div>

    <div class="preview" id="preview"></div>

    <div class="instructions">
      <h3>üìã Instructions:</h3>
      <ol>
        <li>Click <strong>"Download"</strong> for each icon size (all 4 icons)</li>
        <li>Move files to <code>public/</code> folder in your project</li>
        <li>Commit and push:
          <pre>git add public/icon-*.png
git commit -m "Add custom GritDocs logo as PWA icons"
git push</pre>
        </li>
        <li>Netlify auto-deploys (~2 minutes)</li>
        <li>Run Lighthouse again - your site now has your custom logo! üöÄ</li>
      </ol>
    </div>
  </div>

  <script>
    // Load the SVG logo
    const svgPath = '/icon.svg';
    
    async function convertSvgToPng() {
      try {
        // Fetch the SVG
        const response = await fetch(svgPath);
        if (!response.ok) throw new Error(`Failed to load SVG: ${response.status}`);
        
        const svgText = await response.text();
        
        // Create canvases for each size
        const sizes = [
          { w: 192, h: 192, name: 'icon-192.png', type: 'regular' },
          { w: 512, h: 512, name: 'icon-512.png', type: 'regular' },
          { w: 192, h: 192, name: 'icon-maskable-192.png', type: 'maskable' },
          { w: 512, h: 512, name: 'icon-maskable-512.png', type: 'maskable' }
        ];
        
        const preview = document.getElementById('preview');
        preview.innerHTML = '';
        
        for (const size of sizes) {
          const canvas = document.createElement('canvas');
          canvas.width = size.w;
          canvas.height = size.h;
          canvas.id = `canvas-${size.name}`;
          
          const ctx = canvas.getContext('2d');
          
          // Background
          ctx.fillStyle = size.type === 'maskable' ? '#48CFCB' : 'white';
          if (size.type === 'regular') {
            // Rounded corners
            const radius = size.w / 8;
            ctx.beginPath();
            ctx.moveTo(radius, 0);
            ctx.lineTo(size.w - radius, 0);
            ctx.quadraticCurveTo(size.w, 0, size.w, radius);
            ctx.lineTo(size.w, size.h - radius);
            ctx.quadraticCurveTo(size.w, size.h, size.w - radius, size.h);
            ctx.lineTo(radius, size.h);
            ctx.quadraticCurveTo(0, size.h, 0, size.h - radius);
            ctx.lineTo(0, radius);
            ctx.quadraticCurveTo(0, 0, radius, 0);
            ctx.closePath();
          }
          ctx.fillRect(0, 0, size.w, size.h);
          
          // Create image from SVG
          const img = new Image();
          img.onload = function() {
            // Draw SVG centered with padding
            const padding = size.type === 'maskable' ? size.w * 0.1 : size.w * 0.1;
            const drawSize = size.w - (padding * 2);
            ctx.drawImage(img, padding, padding, drawSize, drawSize);
          };
          img.onerror = function() {
            ctx.fillStyle = '#999';
            ctx.font = `bold ${size.w * 0.4}px Arial`;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText('GD', size.w / 2, size.h / 2);
          };
          
          img.src = 'data:image/svg+xml;base64,' + btoa(svgText);
          
          // Create preview box
          const box = document.createElement('div');
          box.className = 'icon-box';
          box.innerHTML = `
            <h3>${size.w}x${size.w}${size.type === 'maskable' ? ' (Maskable)' : ''}</h3>
            ${canvas.outerHTML}
            <button onclick="downloadCanvas('canvas-${size.name}', '${size.name}')">
              Download ${size.name}
            </button>
          `;
          
          // Replace canvas in box with our canvas
          preview.appendChild(box);
          box.querySelector('canvas').replaceWith(canvas);
        }
        
        document.getElementById('status').className = 'status ready';
        document.getElementById('status').innerHTML = '‚úÖ Logo loaded! Click "Download" to save your icons.';
        
      } catch (error) {
        console.error('Error:', error);
        document.getElementById('status').className = 'status error';
        document.getElementById('status').innerHTML = `‚ùå Error: ${error.message}`;
      }
    }
    
    function downloadCanvas(canvasId, filename) {
      const canvas = document.getElementById(canvasId);
      const link = document.createElement('a');
      link.download = filename;
      link.href = canvas.toDataURL('image/png');
      link.click();
    }
    
    // Start conversion
    convertSvgToPng();
  </script>
</body>
</html>
